<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>消费情况</title>
    <link rel="stylesheet" href="./lib/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./lib/bootstrap-validator/css/bootstrapValidator.min.css">
    <link rel="stylesheet" href="./lib/nprogress/nprogress.css">
    <link rel="stylesheet" href="./css/base.css">
    <link rel="stylesheet" href="./css/common.css">
</head>
<body>
<!--左边栏-->
<div class="left_aside">

    <div class="brand">门店系统</div>

    <div class="user">
        <div class="user_img">
            <img src="./image/default.png" alt="">
        </div>
        <div class="user_name">
            <span>导航栏</span>
        </div>

        <div class="user_name">

        </div>
    </div>

    <div class="nav">

		 <ul>
            <li class="first">
                <a href="./customer.html">
                    <i class="glyphicon glyphicon-user"></i>
                    <span>客户管理</span>
                </a>
            </li>
        </ul>


        <ul>
            <li class="first">
                <a href="./staff.html">
                    <i class="glyphicon glyphicon-user"></i>
                    <span>员工管理</span>
                </a>
            </li>
        </ul>


		 <ul>
            <li class="first">
                <a href="./project.html">
                    <i class="glyphicon glyphicon-tags"></i>
                    <span>项目管理</span>
                </a>
            </li>
        </ul>

        <ul>
            <li class="first">
                <a href="./card.html">
                    <i class="glyphicon glyphicon-tags"></i>
                    <span>优惠卡管理</span>
                </a>
            </li>
        </ul>

		<ul>
            <li class="first">
                <a href="./salary.html">
                    <i class="glyphicon glyphicon-jpy"></i>
                    <span>薪水管理</span>
                </a>
            </li>
        </ul>

        <ul>
            <li class="first current">
                <a href="./consum.html">
                    <i class="glyphicon glyphicon-list"></i>
                    <span>消费记录</span>
                </a>
            </li>
        </ul>

		<ul>
            <li class="first">
                <a href="./turnover.html">
                    <i class="glyphicon glyphicon-list"></i>
                    <span>营业额记录</span>
                </a>
            </li>
        </ul>

    </div>

</div>

<!-- 右边主体 -->
<div class="item_main">
    <!-- 头部导航栏 -->
    <div class="main_top">
        <a href="#" class="pull-left" id="top_btn_left"><i class="glyphicon glyphicon-align-justify"></i></a>
        <a href="#" class="pull-right" id="top_btn_right"><i class="glyphicon glyphicon-log-out"></i></a>
    </div>
    <!-- 主体内容 -->
    <div class="main_body container-fluid">
        <!-- 路径导航 -->
        <ol class="breadcrumb">
            <li><a href="./index1.html" style="color: #2aabd2">首页</a></li>
            <li class="active">消费记录</li>
        </ol>
<!--		todo: 添加消费记录不合理，如果要用的话从这里放开 -->
<!--		<button class="btn btn-default" data-toggle="modal" data-target="#myModal_add_consum_record" onclick="get_staff_name()">添加</button>-->
		<!-- 搜索框 -->
	    <div class="row col-lg-6" style="display: inline-block; margin-bottom: 1.25rem;">
		    <div class="col-lg-6">
			    <div class="input-group">
				    <input type="text" class="form-control" placeholder="输入顾客姓名进行搜索" id="search_name">
				    <span class="input-group-btn">
					    <button class="btn btn-default" type="button" onclick="search_by_name()">Go!</button>
				    </span>
			    </div><!-- /input-group -->
		    </div><!-- /.col-lg-6 -->
			<div class="col-lg-6">
			    <div class="input-group">
				    <input type="text" class="form-control" placeholder="输入支付时间进行搜索" id="search_time">
				    <span class="input-group-btn">
					    <button class="btn btn-default" type="button" onclick="search_by_time()">Go!</button>
				    </span>
			    </div><!-- /input-group -->
			</div><!-- /.col-lg-6 -->
		</div>
		<!-- 对数据渲染的位置 -->
		<div class="list_table">
		<!-- 插在此处 -->
		</div>
		<!-- 分页部分 -->
		<ul id="page_classify"></ul>
	</div>
</div>

<!-- 模态框-->
<!-- 退出管理系统 -->
<div class="modal fade bs-example-modal-sm" tabindex="-1" role="dialog" id="myModal">

    <div class="modal-dialog  modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
                <h4 class="modal-title">温馨提示</h4>
            </div>
            <div class="modal-body">
                <p style="color: #A94442;">
                    <i class="glyphicon glyphicon-info-sign"></i>
                    <span id="logout_notify">你确定要退出门店系统吗</span>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="button" class="btn btn-primary" id="logout_btn">退出</button>
            </div>
        </div>
    </div>
</div>

<!-- 模态框（Modal） -->
<!-- 添加消费记录 -->
<div class="modal fade" id="myModal_add_consum_record" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title" id="myModalLabel">
					添加消费记录
				</h4>
			</div>
			<form id="form_add_consum_record">
				<div class="modal-body">
					<div class="form-group">
					    <select class="form-control" id="add_staff_name">
							<option selected="selected">请选择员工</option>
					    </select>
					</div>
					<div class="form-group">
						<select class="form-control" id="add_consum_type">
							<option value="0" selected="selected">请选择消费类型</option>
							<option value="1">收费项目</option>
							<option value="2">办卡</option>
							<option value="3">充值余额</option>
							<option value="4">给卡的项目充值次数</option>
							<option value="5">退还余额</option>
							<option value="6">退卡</option>
						</select>
					</div>
					<div class="form-group">
					    <select class="form-control" id="add_pay_type">
					    	<option value="-1" selected="selected">请选择支付类型</option>
					    	<option value="0">给顾客退钱</option>
<!--					    	<option value="1">从卡里扣除项目次数</option>-->
<!--					    	<option value="2">从余额中扣除</option>-->
					    	<option value="3">花钱支付</option>
					    </select>
					</div>
					<div class="form-group">
					    <input type="number" class="form-control" placeholder="请输入支付金额"
					           name="add_price" id="add_price">
					</div>
				</div>
			</form>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭
				</button>
				<button type="button" class="btn btn-primary" onclick="add_consum_record_fun()" data-dismiss="modal">
					确定添加
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>

<!-- 模态框（Modal） -->
<!-- 删除消费记录 -->
<div class="modal fade" id="myModal_delete_consum_record" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title" id="myModalLabel">
					删除消费记录
				</h4>
			</div>
			<div class="modal-body">
				<p style="color: #A94442;">
				    <i class="glyphicon glyphicon-info-sign"></i>
				    <span id="logout_notify">你确定要删除这条消费记录吗</span>
				</p>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭
				</button>
				<button type="button" class="btn btn-primary" onclick="delete_consum_record_fun()" data-dismiss="modal">
					确定删除
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>

<!-- 模态框（Modal） -->
<!-- 修改消费记录 -->
<div class="modal fade" id="myModal_change_consum_record" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
					&times;
				</button>
				<h4 class="modal-title" id="myModalLabel">
					修改消费记录
				</h4>
			</div>
			<form id="form_add_consum_record">
				<div class="modal-body">
					<div class="form-group">
						<select class="form-control" id="change_consum_type" disabled="disabled">
							<option value="1">收费项目</option>
							<option value="2">办卡</option>
							<option value="3">充值余额</option>
							<option value="4">给卡的项目充值次数</option>
							<option value="5">退还余额</option>
							<option value="6">退卡</option>
						</select>
					</div>
					<div class="form-group">
					    <input type="text" class="form-control"
					           name="change_customer_name" id="change_customer_name" disabled="disabled">
					</div>
					<div class="form-group">
					    <select class="form-control " id="change_pay_type" disabled="disabled">
					    	<option value="0">给顾客退钱</option>
					    	<option value="1">从卡里扣除项目次数</option>
					    	<option value="2">从余额中扣除</option>
					    	<option value="3">花钱支付</option>
					    </select>
					</div>
					<div class="form-group">
					    <input type="text" class="form-control"
					           name="change_price" id="change_price">
					</div>
					<div class="form-group">
					    <input type="text" class="form-control"
					           name="change_staff-name" id="change_staff_name">
					</div>
					<div class="form-group">
					    <input type="text" class="form-control" placeholder="修改后只改变营业额统计与员工工作记录，不改变客户相关数据，建议修改后加上备注!"
					           name="change_remark" id="change_remark">
					</div>
				</div>
			</form>
			<div class="modal-footer">
				<button type="button" class="btn btn-default" data-dismiss="modal">关闭
				</button>
				<button type="button" class="btn btn-primary" onclick="change_consum_record_fun()" data-dismiss="modal">
					确定修改
				</button>
			</div>
		</div><!-- /.modal-content -->
	</div><!-- /.modal -->
</div>

<script type="text/html" id="consum-list">
<table class="table table-bordered table-hover">
	<tr>
		<th style="display: none;">消费记录序号</th>
<!--		<th>序号</th>-->
		<th>消费类型</th>
		<th>顾客姓名</th>
		<th>支付时间</th>
		<th>支付方式</th>
		<th>价格</th>
		<th>员工姓名</th>
		<th style="width: 15%;">备注</th>
		<th style="width: 15%;">删除/修改</th>
	</tr>
	{{each data.records v i}}
	<tr>
		<td id="hide-id" style="display: none;">{{v.id}}</td>
		<td id="hide-stafff_id"  style="display: none;">{{v.userId}}</td>
		<td id="consum-type">{{v.consumType}}</td>
		<td id="customer-name">{{v.customerName}}</td>
		<td id="pay-time">{{v.payTime}}</td>
		<td id="pay-type">{{v.payType}}</td>
		<td id="price">{{v.price}}</td>
		<td id="staff-name">{{v.staffName}}</td>
		<td id="remark">{{v.remark}}</td>
		<td>
			<button class="btn btn-default" data-toggle="modal" data-target="#myModal_change_consum_record" onclick="prepare_change_data(this);">修改</button>
		    <button class="btn btn-danger btn_delete" data-toggle="modal" data-target="#myModal_delete_consum_record" onclick="getDeleteId(this)">删除</button>
		</td>
	</tr>
	{{/each}}
</table>
</script>

<script type="text/html" id="staff-id">
	<option>{{id}}</option>
</script>

<script type="text/html" id="staff-name-add">
	<option>{{name}}</option>
</script>

<!-- <script type="text/html" id="add-consum-list">
<table class="table table-bordered table-hover">
	<tr>
		<th>消费类型</th>
		<th>顾客姓名</th>
		<th>支付方式</th>
		<th style="width: 25%">删除/修改</th>
	</tr>
	<tr>
		<td>{{consumType}}</td>
		<td>{{customerName}}</td>
		<td>{{payType}}</td>
		<td>
			<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal_add_consum_record">添加</button>
		    <button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal_delete_consum_record" onclick="getDeleteId(this)">删除</button>
			<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal_change_consum_record" onclick="getChangeId(this)">修改</button>
		</td>
	</tr>
</table>
</script> -->

<script src="./lib/jquery/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="./lib/bootstrap-validator/js/bootstrapValidator.min.js"></script>
<script src="./lib/bootstrap-paginator/bootstrap-paginator.min.js"></script>
<script src="./lib/nprogress/nprogress.js"></script>
<script src="./js/common.js"></script>
<script src="./lib/artTemplate/template-web.js"></script>
<script src="./js/consum.js"></script>

</body>
</html>